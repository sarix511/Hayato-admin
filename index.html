
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hayato Admin Panel V8000008</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(145deg, #0a1014, #121a20);
      color: white;
      padding: 2rem;
    }
    .panel {
      max-width: 700px;
      margin: auto;
      background: #111920;
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 0 15px #00bfff;
    }
    input {
      width: 100%;
      padding: 10px;
      margin-bottom: 1rem;
      border-radius: 8px;
      border: none;
      background: #1d2a33;
      color: white;
    }
    button {
      background: linear-gradient(to right, #007bff, #00bfff);
      color: white;
      border: none;
      padding: 10px 20px;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 1rem;
    }
    table {
      width: 100%;
      margin-top: 2rem;
      border-collapse: collapse;
    }
    th, td {
      padding: 8px;
      background: #1e2a33;
      color: white;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="panel">
    <h2>üéÆ Hayato Admin Panel + Leaderboard</h2>
    <input id="uid" placeholder="Enter UID" />
    <input id="coins" type="number" placeholder="Coins to Send" />
    <button onclick="sendCoins()">Send Coins</button>

    <input id="announceText" placeholder="New Announcement" />
    <button onclick="addAnnouncement()">Add Announcement</button>

    <input id="banUid" placeholder="UID to Ban" />
    <button onclick="banUser()">Ban User</button>

    <h3>üèÜ Live Leaderboard</h3>
    <table>
      <thead>
        <tr><th>Rank</th><th>UID</th><th>Coins</th></tr>
      </thead>
      <tbody id="leaderboardTable"></tbody>
    </table><br><h3>üì§ Pending Payment Screenshots</h3><div id="pendingSS"></div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getDatabase, ref, update, push, set, get, child } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDyjHRJ7_q-VrxEh2joJcyumzCzqibABfI",
      authDomain: "hayato-esports-84f9e.firebaseapp.com",
      databaseURL: "https://hayato-esports-84f9e-default-rtdb.firebaseio.com",
      projectId: "hayato-esports-84f9e",
      storageBucket: "hayato-esports-84f9e.appspot.com",
      messagingSenderId: "498924188514",
      appId: "1:498924188514:web:eedb60efe5e1a7abfff23b"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    window.sendCoins = function () {
      const uid = document.getElementById("uid").value;
      const coins = parseInt(document.getElementById("coins").value);
      if (!uid || !coins) return alert("Enter UID and coin value");
      const userRef = ref(db, "slots/status/users/" + uid);
      update(userRef, {
        coins,
        history: {
          1: "Admin ne " + coins + " coins diye"
        }
      }).then(() => alert("‚úÖ Coins sent"));
    };

    window.addAnnouncement = function () {
      const text = document.getElementById("announceText").value;
      if (!text) return alert("Enter announcement");
      const refPath = ref(db, "slots/status/announcements");
      const newRef = push(refPath);
      set(newRef, text).then(() => alert("üì¢ Announcement added"));
    };

    window.banUser = function () {
      const uid = document.getElementById("banUid").value;
      if (!uid) return alert("Enter UID to ban");
      const banRef = ref(db, "slots/status/banned/" + uid);
      set(banRef, true).then(() => alert("üö´ User banned"));
    };

    async function loadLeaderboard() {
      const snapshot = await get(child(ref(db), "slots/status/users"));
      const table = document.getElementById("leaderboardTable");
      if (snapshot.exists()) {
        const users = snapshot.val();
        const sorted = Object.entries(users)
          .map(([uid, data]) => ({ uid, coins: data.coins || 0 }))
          .sort((a, b) => b.coins - a.coins);

        table.innerHTML = "";
        sorted.forEach((u, i) => {
          table.innerHTML += `<tr><td>${i + 1}</td><td>${u.uid}</td><td>${u.coins}</td></tr>`;
        });
      }
    }

    loadLeaderboard();
loadPendingScreenshots();
  
    async function loadPendingScreenshots() {
      const snapshot = await get(child(ref(db), "slots/status/payments/pending"));
      const area = document.getElementById("pendingSS");
      area.innerHTML = "";
      if (snapshot.exists()) {
        const data = snapshot.val();
        Object.entries(data).forEach(([uid, val]) => {
          area.innerHTML += `
            <div style="margin:1rem 0;border:1px solid #00bfff;padding:10px;border-radius:8px;">
              <strong>UID:</strong> ${uid}<br/>
              <img src="${val.image}" width="250"/><br/><br/>
              <button onclick="approveCoins('${uid}')">‚úÖ Approve & Send Coins</button>
            </div>`;
        });
      } else {
        area.innerHTML = "<p>No pending screenshots.</p>";
      }
    }

    function approveCoins(uid) {
      const coins = 50; // default coins to send
      const userRef = ref(db, "slots/status/users/" + uid);
      update(userRef, {
        coins: coins,
        history: { 1: "Coins approved after payment" }
      });
      const payRef = ref(db, "slots/status/payments/pending/" + uid);
      set(payRef, null);
      alert("‚úÖ Coins approved and sent to " + uid);
      loadPendingScreenshots();
    }
    </script>
</body>
</html>
